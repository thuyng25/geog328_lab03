<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>Matcha Cafe</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.css" rel="stylesheet" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.js"></script>
    <style>
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { position: absolute; inset: 0; }

      #panel {
        position: absolute;
        top: 12px;
        right: 12px;
        width: 380px;
        max-height: calc(100vh - 24px);
        overflow-y: auto;
        background: rgba(255, 255, 255, 0.97);
        border-radius: 10px;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        padding: 16px;
        box-sizing: border-box;
      }
      
    </style>
  </head>
  <body>
    <div id="map"></div>
    <aside id="panel">
      <h2>Matcha Cafe in Taipei</h2>
    </aside>

    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoidGh1eW5nMjI0IiwiYSI6ImNtaGY5Z2N5YTAyejUya3EzOTg0bWJoeHUifQ.ALKhLXVy6672boOi-LSIpg';

      const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/outdoors-v12',
        center: [121.535, 25.045],
        zoom: 12
      });

      async function loadDataAndUI() {
        const [pointsRes, regionsRes] = await Promise.all([
          fetch('data/matcha_cafes.json'),
          fetch('data/taipei.json')
        ]);
        const points = await pointsRes.json();
        const regions = await regionsRes.json();

        map.on('load', () => {
          map.addSource('regions', { type: 'geojson', data: regions });
          map.addLayer({
            id: 'regions-fill',
            type: 'fill',
            source: 'regions',
            paint: { 'fill-color': '#4da3ff', 'fill-opacity': 0.35 }
          });
        });
      }

      loadDataAndUI();
    </script>
  </body>
</html>
